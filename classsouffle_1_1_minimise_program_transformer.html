<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>souffle: souffle::MinimiseProgramTransformer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">souffle
   &#160;<span id="projectnumber">2.0.1-62-g772b0cb</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesouffle.html">souffle</a></li><li class="navelem"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html">MinimiseProgramTransformer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">souffle::MinimiseProgramTransformer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Transformation pass to remove equivalent rules.  
 <a href="classsouffle_1_1_minimise_program_transformer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_minimise_program_8h_source.html">MinimiseProgram.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for souffle::MinimiseProgramTransformer:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer__inherit__graph.png" border="0" usemap="#souffle_1_1_minimise_program_transformer_inherit__map" alt="Inheritance graph"/></div>
<map name="souffle_1_1_minimise_program_transformer_inherit__map" id="souffle_1_1_minimise_program_transformer_inherit__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_transformer.html" title="{souffle::AstTransformer\n||+ apply()\l+ clone()\l+ getName()\l+ ~AstTransformer()\l&#45; transform()\l}" alt="" coords="44,5,217,141"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for souffle::MinimiseProgramTransformer:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer__coll__graph.png" border="0" usemap="#souffle_1_1_minimise_program_transformer_coll__map" alt="Collaboration graph"/></div>
<map name="souffle_1_1_minimise_program_transformer_coll__map" id="souffle_1_1_minimise_program_transformer_coll__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_transformer.html" title="{souffle::AstTransformer\n||+ apply()\l+ clone()\l+ getName()\l+ ~AstTransformer()\l&#45; transform()\l}" alt="" coords="44,5,217,141"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html">NormalisedClauseRepr</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a077a432cdffb3cf308222118091776f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html">MinimiseProgramTransformer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#a077a432cdffb3cf308222118091776f9">clone</a> () const override</td></tr>
<tr class="separator:a077a432cdffb3cf308222118091776f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18b7e0b80e91ae532e00adcc3e1724d2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#a18b7e0b80e91ae532e00adcc3e1724d2">getName</a> () const override</td></tr>
<tr class="separator:a18b7e0b80e91ae532e00adcc3e1724d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsouffle_1_1_ast_transformer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsouffle_1_1_ast_transformer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsouffle_1_1_ast_transformer.html">souffle::AstTransformer</a></td></tr>
<tr class="memitem:a32236031d6b2f0f8dc4bbe0a7aa90b43 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_ast_transformer.html#a32236031d6b2f0f8dc4bbe0a7aa90b43">apply</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit)</td></tr>
<tr class="separator:a32236031d6b2f0f8dc4bbe0a7aa90b43 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3e84a3e9a223b7be8123c7af8f94f39 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_ast_transformer.html#af3e84a3e9a223b7be8123c7af8f94f39">~AstTransformer</a> ()=default</td></tr>
<tr class="separator:af3e84a3e9a223b7be8123c7af8f94f39 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:add5bf88b9933b3c30318252494570b2c"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c">areBijectivelyEquivalent</a> (const <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> *left, const <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> *right)</td></tr>
<tr class="separator:add5bf88b9933b3c30318252494570b2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab6a81fc39db5fb47bfd44a45ddc11c4c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#ab6a81fc39db5fb47bfd44a45ddc11c4c">transform</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit) override</td></tr>
<tr class="separator:ab6a81fc39db5fb47bfd44a45ddc11c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:ac19ec5ead224a066a546b7938a1a6e5e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#ac19ec5ead224a066a546b7938a1a6e5e">areBijectivelyEquivalent</a> (const <a class="el" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html">NormalisedClauseRepr</a> &amp;left, const <a class="el" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html">NormalisedClauseRepr</a> &amp;right)</td></tr>
<tr class="memdesc:ac19ec5ead224a066a546b7938a1a6e5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">&ndash; Bijective <a class="el" href="classsouffle_1_1_equivalence.html" title="Equivalence class for variables in query command. ">Equivalence</a> Helper Methods &ndash;  <a href="#ac19ec5ead224a066a546b7938a1a6e5e">More...</a><br /></td></tr>
<tr class="separator:ac19ec5ead224a066a546b7938a1a6e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a1b20f4ab1e2e63618323f87f737d3"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#a84a1b20f4ab1e2e63618323f87f737d3">isValidPermutation</a> (const <a class="el" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html">NormalisedClauseRepr</a> &amp;left, const <a class="el" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html">NormalisedClauseRepr</a> &amp;right, const std::vector&lt; unsigned int &gt; &amp;permutation)</td></tr>
<tr class="separator:a84a1b20f4ab1e2e63618323f87f737d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81d730e2848958be48f2d880d7a3d94"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#ae81d730e2848958be48f2d880d7a3d94">reduceClauseBodies</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit)</td></tr>
<tr class="memdesc:ae81d730e2848958be48f2d880d7a3d94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove redundant literals within a clause.  <a href="#ae81d730e2848958be48f2d880d7a3d94">More...</a><br /></td></tr>
<tr class="separator:ae81d730e2848958be48f2d880d7a3d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab3602ce84db09dbbdb127edf14051d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#abab3602ce84db09dbbdb127edf14051d">reduceLocallyEquivalentClauses</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit)</td></tr>
<tr class="memdesc:abab3602ce84db09dbbdb127edf14051d"><td class="mdescLeft">&#160;</td><td class="mdescRight">&ndash; Sub-Transformations &ndash;  <a href="#abab3602ce84db09dbbdb127edf14051d">More...</a><br /></td></tr>
<tr class="separator:abab3602ce84db09dbbdb127edf14051d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0c88072e2805fbb40aa0cc87c38142d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#af0c88072e2805fbb40aa0cc87c38142d">reduceSingletonRelations</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit)</td></tr>
<tr class="memdesc:af0c88072e2805fbb40aa0cc87c38142d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes redundant singleton relations.  <a href="#af0c88072e2805fbb40aa0cc87c38142d">More...</a><br /></td></tr>
<tr class="separator:af0c88072e2805fbb40aa0cc87c38142d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4044666b16791d5f7ce48e375a2c3738"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html#a4044666b16791d5f7ce48e375a2c3738">removeRedundantClauses</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit)</td></tr>
<tr class="memdesc:a4044666b16791d5f7ce48e375a2c3738"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove clauses that are only satisfied if they are already satisfied.  <a href="#a4044666b16791d5f7ce48e375a2c3738">More...</a><br /></td></tr>
<tr class="separator:a4044666b16791d5f7ce48e375a2c3738"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transformation pass to remove equivalent rules. </p>

<p class="definition">Definition at line <a class="el" href="_minimise_program_8h_source.html#l00031">31</a> of file <a class="el" href="_minimise_program_8h_source.html">MinimiseProgram.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="add5bf88b9933b3c30318252494570b2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add5bf88b9933b3c30318252494570b2c">&#9670;&nbsp;</a></span>areBijectivelyEquivalent() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::MinimiseProgramTransformer::areBijectivelyEquivalent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> *&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_ast_clause.html">AstClause</a> *&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_minimise_program_8cpp_source.html#l00376">376</a> of file <a class="el" href="_minimise_program_8cpp_source.html">MinimiseProgram.cpp</a>.</p>

<p class="reference">References <a class="el" href="_minimise_program_8cpp_source.html#l00063">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::NormalisedClauseRepr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_minimise_program_8h_source.html#l00040">clone()</a>, <a class="el" href="_minimise_program_8h_source.html#l00033">getName()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00383">reduceLocallyEquivalentClauses()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00425">reduceSingletonRelations()</a>, and <a class="el" href="ast__transformers__test_8cpp_source.html#l00237">souffle::test::TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                                                   {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keyword">auto</span> normalisedLeft = NormalisedClauseRepr(leftClause);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keyword">auto</span> normalisedRight = NormalisedClauseRepr(rightClause);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c">areBijectivelyEquivalent</a>(normalisedLeft, normalisedRight);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div><div class="ttc" id="classsouffle_1_1_minimise_program_transformer_html_add5bf88b9933b3c30318252494570b2c"><div class="ttname"><a href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c">souffle::MinimiseProgramTransformer::areBijectivelyEquivalent</a></div><div class="ttdeci">static bool areBijectivelyEquivalent(const AstClause *left, const AstClause *right)</div><div class="ttdef"><b>Definition:</b> <a href="_minimise_program_8cpp_source.html#l00376">MinimiseProgram.cpp:376</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_add5bf88b9933b3c30318252494570b2c_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_add5bf88b9933b3c30318252494570b2c_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_add5bf88b9933b3c30318252494570b2c_cgraph" id="classsouffle_1_1_minimise_program_transformer_add5bf88b9933b3c30318252494570b2c_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a34e47cf9f685eceddef67519b1ee439b" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::NormalisedClauseRepr" alt="" coords="320,122,547,178"/>
<area shape="rect" id="node3" href="classsouffle_1_1_ast_clause.html#a5a29a4f9ba5d0e4aea869cf71a6efbbf" title="Return the atom that represents the head of the clause. " alt="" coords="639,5,777,47"/>
<area shape="rect" id="node4" href="classsouffle_1_1_ast_atom.html#a9c726c597d7921245dd97dcc72b8aeed" title="get arguments " alt="" coords="1157,135,1387,162"/>
<area shape="rect" id="node6" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a72432d810132129b61c9d4097fed9cfd" title="Return a normalised string repr of an argument. " alt="" coords="1159,303,1385,359"/>
<area shape="rect" id="node7" href="classsouffle_1_1_ast_clause.html#a1b5199df425ba5839383a75c5bb8a254" title="Obtains a copy of the internally maintained body literals. " alt="" coords="639,71,777,112"/>
<area shape="rect" id="node8" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a033bbba8725b56e7e2a1ff2ec952f6bb" title="Parse a body literal into the element list. " alt="" coords="595,270,821,326"/>
<area shape="rect" id="node5" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="1448,107,1595,134"/>
<area shape="rect" id="node9" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#aeac7b9e6005406f777e83c127294226e" title="Parse an atom with a preset name qualifier into the element list. " alt="" coords="869,238,1096,294"/>
<area shape="rect" id="node11" href="classsouffle_1_1_ast_qualified_name.html#ad0b3356de316d11e1782e83425b0e69a" title="prepend qualifiers " alt="" coords="1176,187,1368,228"/>
<area shape="rect" id="node12" href="namespacesouffle.html#a10525539360588d9c9048cb27f80d6ea" title="Converts operator to its symbolic representation. " alt="" coords="885,369,1081,411"/>
<area shape="rect" id="node13" href="namespacesouffle.html#aecc08c83ad9634fc515b7aa094702949" title="A generic function converting strings into strings (trivial case). " alt="" coords="920,435,1045,462"/>
<area shape="rect" id="node10" href="classsouffle_1_1_ast_atom.html#a2fcd569fa7d8ed8c0c2dfd0d1c362e50" title="get qualified name " alt="" coords="1144,253,1400,279"/>
</map>
</div>

</div>
</div>
<a id="ac19ec5ead224a066a546b7938a1a6e5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac19ec5ead224a066a546b7938a1a6e5e">&#9670;&nbsp;</a></span>areBijectivelyEquivalent() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::MinimiseProgramTransformer::areBijectivelyEquivalent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html">NormalisedClauseRepr</a> &amp;&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html">NormalisedClauseRepr</a> &amp;&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&ndash; Bijective <a class="el" href="classsouffle_1_1_equivalence.html" title="Equivalence class for variables in query command. ">Equivalence</a> Helper Methods &ndash; </p>

<p class="definition">Definition at line <a class="el" href="_minimise_program_8cpp_source.html#l00314">314</a> of file <a class="el" href="_minimise_program_8cpp_source.html">MinimiseProgram.cpp</a>.</p>

<p class="reference">References <a class="el" href="_minimise_program_8cpp_source.html#l00181">souffle::extractPermutations()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00086">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::getConstants()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00090">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::getElements()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00082">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::getVariables()</a>, <a class="el" href="json11_8h_source.html#l00662">i</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00078">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::isFullyNormalised()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00271">isValidPermutation()</a>, <a class="el" href="html_js_chartist_min_8h_source.html#l00015">j</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00059">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::NormalisedClauseElementRepr::name</a>, and <a class="el" href="_minimise_program_8cpp_source.html#l00060">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::NormalisedClauseElementRepr::params</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                                                             {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; leftElements = left.getElements();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rightElements = right.getElements();</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; leftVars = left.getVariables();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rightVars = right.getVariables();</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">// rules must be fully normalised</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (!left.isFullyNormalised() || !right.isFullyNormalised()) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// rules must be the same length to be equal</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (leftElements.size() != rightElements.size()) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// head atoms must have the same arity (names do not matter)</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (leftElements[0].params.size() != rightElements[0].params.size()) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// rules must have the same number of distinct variables</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (leftVars.size() != rightVars.size()) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment">// rules must have the exact same set of constants</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">if</span> (left.getConstants() != right.getConstants()) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// set up the n x n permutation matrix, where n is the number of clause elements</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordtype">size_t</span> size = leftElements.size();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">auto</span> permutationMatrix = std::vector&lt;std::vector&lt;unsigned int&gt;&gt;(size);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> : permutationMatrix) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = std::vector&lt;unsigned int&gt;(size);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// create permutation matrix</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    permutationMatrix[0][0] = 1;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 1; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> &lt; size; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>++) {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a> = 1; <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a> &lt; size; <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>++) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">if</span> (leftElements[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>].name == rightElements[<a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>].name) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                permutationMatrix[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>][<a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>] = 1;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// check if any of these permutations have valid variable mappings</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    std::vector&lt;std::vector&lt;unsigned int&gt;&gt; permutations = <a class="code" href="namespacesouffle.html#a32ab351a6a362212378a2f2c0b264ed3">extractPermutations</a>(permutationMatrix);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> permutation : permutations) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classsouffle_1_1_minimise_program_transformer.html#a84a1b20f4ab1e2e63618323f87f737d3">isValidPermutation</a>(left, right, permutation)) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="comment">// valid permutation with valid mapping</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="comment">// therefore, the two clauses are equivalent!</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div><div class="ttc" id="namespacesouffle_html_a32ab351a6a362212378a2f2c0b264ed3"><div class="ttname"><a href="namespacesouffle.html#a32ab351a6a362212378a2f2c0b264ed3">souffle::extractPermutations</a></div><div class="ttdeci">static std::vector&lt; std::vector&lt; unsigned int &gt; &gt; extractPermutations(const std::vector&lt; std::vector&lt; unsigned int &gt;&gt; &amp;permutationMatrix)</div><div class="ttdoc">Extract valid permutations from a given permutation matrix of valid moves. </div><div class="ttdef"><b>Definition:</b> <a href="_minimise_program_8cpp_source.html#l00181">MinimiseProgram.cpp:181</a></div></div>
<div class="ttc" id="json11_8h_html_ae46bd26d7133dfe98f8cec7c5ac5c7a1"><div class="ttname"><a href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json11_8h_source.html#l00662">json11.h:662</a></div></div>
<div class="ttc" id="html_js_chartist_min_8h_html_aab858032a95af802114b255fac6f45f2"><div class="ttname"><a href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a></div><div class="ttdeci">var j</div><div class="ttdef"><b>Definition:</b> <a href="html_js_chartist_min_8h_source.html#l00015">htmlJsChartistMin.h:15</a></div></div>
<div class="ttc" id="classsouffle_1_1_minimise_program_transformer_html_a84a1b20f4ab1e2e63618323f87f737d3"><div class="ttname"><a href="classsouffle_1_1_minimise_program_transformer.html#a84a1b20f4ab1e2e63618323f87f737d3">souffle::MinimiseProgramTransformer::isValidPermutation</a></div><div class="ttdeci">static bool isValidPermutation(const NormalisedClauseRepr &amp;left, const NormalisedClauseRepr &amp;right, const std::vector&lt; unsigned int &gt; &amp;permutation)</div><div class="ttdef"><b>Definition:</b> <a href="_minimise_program_8cpp_source.html#l00271">MinimiseProgram.cpp:271</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_ac19ec5ead224a066a546b7938a1a6e5e_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_ac19ec5ead224a066a546b7938a1a6e5e_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_ac19ec5ead224a066a546b7938a1a6e5e_cgraph" id="classsouffle_1_1_minimise_program_transformer_ac19ec5ead224a066a546b7938a1a6e5e_cgraph">
<area shape="rect" id="node2" href="namespacesouffle.html#a32ab351a6a362212378a2f2c0b264ed3" title="Extract valid permutations from a given permutation matrix of valid moves. " alt="" coords="332,5,539,32"/>
<area shape="rect" id="node3" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a1a44f1ca5e269da8448896136de64acd" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::getConstants" alt="" coords="599,43,825,99"/>
<area shape="rect" id="node4" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a1c51bf91ca46130cd4be3c6fc1bc975c" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::getElements" alt="" coords="599,124,825,180"/>
<area shape="rect" id="node5" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a6d9ad810c382155445a670344ce6e136" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::getVariables" alt="" coords="599,205,825,261"/>
<area shape="rect" id="node6" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a2d3bbbd131683e9bfe9f2387831f575d" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::isFullyNormalised" alt="" coords="322,275,549,331"/>
<area shape="rect" id="node7" href="classsouffle_1_1_minimise_program_transformer.html#a84a1b20f4ab1e2e63618323f87f737d3" title="souffle::MinimiseProgram\lTransformer::isValidPermutation" alt="" coords="320,107,551,149"/>
</map>
</div>

</div>
</div>
<a id="a077a432cdffb3cf308222118091776f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a077a432cdffb3cf308222118091776f9">&#9670;&nbsp;</a></span>clone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsouffle_1_1_minimise_program_transformer.html">MinimiseProgramTransformer</a>* souffle::MinimiseProgramTransformer::clone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classsouffle_1_1_ast_transformer.html#a45d4145e5f85990fe36efe04ca78b90d">souffle::AstTransformer</a>.</p>

<p class="definition">Definition at line <a class="el" href="_minimise_program_8h_source.html#l00040">40</a> of file <a class="el" href="_minimise_program_8h_source.html">MinimiseProgram.h</a>.</p>

<p class="reference">References <a class="el" href="_minimise_program_8cpp_source.html#l00376">areBijectivelyEquivalent()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00271">isValidPermutation()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00531">reduceClauseBodies()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00383">reduceLocallyEquivalentClauses()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00425">reduceSingletonRelations()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00506">removeRedundantClauses()</a>, and <a class="el" href="_minimise_program_8cpp_source.html#l00571">transform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                                                       {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">new</span> MinimiseProgramTransformer();</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    }</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_a077a432cdffb3cf308222118091776f9_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_a077a432cdffb3cf308222118091776f9_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_a077a432cdffb3cf308222118091776f9_cgraph" id="classsouffle_1_1_minimise_program_transformer_a077a432cdffb3cf308222118091776f9_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c" title="souffle::MinimiseProgram\lTransformer::areBijectivelyEquivalent" alt="" coords="835,529,1101,570"/>
<area shape="rect" id="node15" href="classsouffle_1_1_minimise_program_transformer.html#a84a1b20f4ab1e2e63618323f87f737d3" title="souffle::MinimiseProgram\lTransformer::isValidPermutation" alt="" coords="241,133,472,174"/>
<area shape="rect" id="node19" href="classsouffle_1_1_minimise_program_transformer.html#ae81d730e2848958be48f2d880d7a3d94" title="Remove redundant literals within a clause. " alt="" coords="533,246,773,287"/>
<area shape="rect" id="node25" href="classsouffle_1_1_minimise_program_transformer.html#abab3602ce84db09dbbdb127edf14051d" title="– Sub&#45;Transformations – " alt="" coords="520,412,787,468"/>
<area shape="rect" id="node29" href="classsouffle_1_1_minimise_program_transformer.html#af0c88072e2805fbb40aa0cc87c38142d" title="Removes redundant singleton relations. " alt="" coords="547,660,760,716"/>
<area shape="rect" id="node43" href="classsouffle_1_1_minimise_program_transformer.html#a4044666b16791d5f7ce48e375a2c3738" title="Remove clauses that are only satisfied if they are already satisfied. " alt="" coords="540,312,767,368"/>
<area shape="rect" id="node44" href="classsouffle_1_1_minimise_program_transformer.html#ab6a81fc39db5fb47bfd44a45ddc11c4c" title="souffle::MinimiseProgram\lTransformer::transform" alt="" coords="263,366,451,407"/>
<area shape="rect" id="node3" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a34e47cf9f685eceddef67519b1ee439b" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::NormalisedClauseRepr" alt="" coords="1150,683,1377,739"/>
<area shape="rect" id="node4" href="classsouffle_1_1_ast_clause.html#a5a29a4f9ba5d0e4aea869cf71a6efbbf" title="Return the atom that represents the head of the clause. " alt="" coords="1469,749,1608,790"/>
<area shape="rect" id="node5" href="classsouffle_1_1_ast_atom.html#a9c726c597d7921245dd97dcc72b8aeed" title="get arguments " alt="" coords="1987,691,2218,717"/>
<area shape="rect" id="node7" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a72432d810132129b61c9d4097fed9cfd" title="Return a normalised string repr of an argument. " alt="" coords="1989,501,2216,557"/>
<area shape="rect" id="node8" href="classsouffle_1_1_ast_clause.html#a1b5199df425ba5839383a75c5bb8a254" title="Obtains a copy of the internally maintained body literals. " alt="" coords="2033,807,2172,849"/>
<area shape="rect" id="node9" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a033bbba8725b56e7e2a1ff2ec952f6bb" title="Parse a body literal into the element list. " alt="" coords="1425,617,1652,673"/>
<area shape="rect" id="node6" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="2279,815,2425,841"/>
<area shape="rect" id="node10" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#aeac7b9e6005406f777e83c127294226e" title="Parse an atom with a preset name qualifier into the element list. " alt="" coords="1700,684,1927,740"/>
<area shape="rect" id="node12" href="classsouffle_1_1_ast_qualified_name.html#ad0b3356de316d11e1782e83425b0e69a" title="prepend qualifiers " alt="" coords="2007,742,2199,783"/>
<area shape="rect" id="node13" href="namespacesouffle.html#a10525539360588d9c9048cb27f80d6ea" title="Converts operator to its symbolic representation. " alt="" coords="1715,567,1911,609"/>
<area shape="rect" id="node14" href="namespacesouffle.html#aecc08c83ad9634fc515b7aa094702949" title="A generic function converting strings into strings (trivial case). " alt="" coords="1751,633,1876,660"/>
<area shape="rect" id="node11" href="classsouffle_1_1_ast_atom.html#a2fcd569fa7d8ed8c0c2dfd0d1c362e50" title="get qualified name " alt="" coords="1975,928,2231,955"/>
<area shape="rect" id="node16" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a1c51bf91ca46130cd4be3c6fc1bc975c" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::getElements" alt="" coords="540,85,767,141"/>
<area shape="rect" id="node17" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a1a44f1ca5e269da8448896136de64acd" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::getConstants" alt="" coords="540,165,767,221"/>
<area shape="rect" id="node18" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a6d9ad810c382155445a670344ce6e136" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::getVariables" alt="" coords="540,5,767,61"/>
<area shape="rect" id="node20" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="871,310,1065,351"/>
<area shape="rect" id="node21" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584" title="souffle::clone" alt="" coords="913,259,1023,285"/>
<area shape="rect" id="node22" href="namespacesouffle.html#a8a825f62e860ca448e7e16ab1a3a4333" title="souffle::contains" alt="" coords="903,107,1033,133"/>
<area shape="rect" id="node24" href="classsouffle_1_1_ast_program.html#a0bde67af569811987d8e21929163d132" title="remove a clause " alt="" coords="1463,298,1614,339"/>
<area shape="rect" id="node23" href="namespacesouffle.html#aae135d2382a133fa5b036296fbd7f60a" title="souffle::isEqualAdornment" alt="" coords="1167,107,1360,133"/>
<area shape="rect" id="node26" href="classsouffle_1_1_ast_program.html#a71fb3c28c3a105637c22cbe6a9fb63ef" title="get relations " alt="" coords="1188,915,1339,957"/>
<area shape="rect" id="node27" href="namespacesouffle.html#a4d9e53888640a9abfd7ea7c43715152a" title="Returns a vector of clauses in the program describing the relation with the given name..." alt="" coords="1465,364,1612,391"/>
<area shape="rect" id="node28" href="classsouffle_1_1_ast_program.html#aa04b430e385f40c6fe2bf7ad2ca31bb3" title="get clauses " alt="" coords="1738,349,1889,390"/>
<area shape="rect" id="node30" href="classsouffle_1_1_ast_translation_unit.html#af396e44c83e5ad410c9ec3e2f6b91758" title="get analysis: analysis is generated on the fly if not present " alt="" coords="871,1025,1065,1066"/>
<area shape="rect" id="node33" href="namespacesouffle.html#ada252aa15afbf7d703a11b000dfd4048" title="Returns the relation with the given name in the program. " alt="" coords="894,965,1042,992"/>
<area shape="rect" id="node35" href="classsouffle_1_1_ast_program.html#a8bd39fbf78f6e4b5347bab4c90486bfd" title="remove relation " alt="" coords="893,697,1043,738"/>
<area shape="rect" id="node41" href="classsouffle_1_1_ast_program.html#a0a658e411394dfc93da0ab36e06d0101" title="Apply the mapper to all child nodes. " alt="" coords="893,1115,1043,1157"/>
<area shape="rect" id="node31" href="classsouffle_1_1_debug_report.html#ac0feb8780d23c2ca5d7700e4857b10c4" title="souffle::DebugReport\l::addSection" alt="" coords="1184,1083,1343,1125"/>
<area shape="rect" id="node32" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640" title="souffle::Global::config" alt="" coords="1182,1032,1345,1059"/>
<area shape="rect" id="node34" href="namespacesouffle.html#a62f80c157a6a365d78a43592732a8efa" title="Returns the first element in a container that satisfies a given predicate, nullptr otherwise..." alt="" coords="1211,981,1315,1008"/>
<area shape="rect" id="node36" href="namespacesouffle.html#a503032b9def6267059072aea913780bc" title="Removes the set of clauses with the given relation name. " alt="" coords="1149,503,1377,529"/>
<area shape="rect" id="node37" href="namespacesouffle.html#a3ba7ed6638254bcc59869e1d88795b70" title="Removes the set of IOs with the given relation name. " alt="" coords="1164,813,1363,840"/>
<area shape="rect" id="node38" href="namespacesouffle.html#ab071e2356802d2c83ede10833a2aa413" title="souffle::getIOs" alt="" coords="1481,815,1597,841"/>
<area shape="rect" id="node40" href="classsouffle_1_1_ast_program.html#a79383827fb9e35c1bdc07f3503ba3f97" title="remove an io " alt="" coords="1463,866,1614,907"/>
<area shape="rect" id="node39" href="classsouffle_1_1_ast_program.html#a30121078c8c847e227f351e1e495f677" title="get io directives " alt="" coords="1738,866,1889,907"/>
<area shape="rect" id="node42" href="namespacesouffle.html#a850ddc94302e9b170a98729a22a4c8fa" title="Applies a function to each element of a vector and returns the results. " alt="" coords="1212,1149,1315,1176"/>
</map>
</div>

</div>
</div>
<a id="a18b7e0b80e91ae532e00adcc3e1724d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18b7e0b80e91ae532e00adcc3e1724d2">&#9670;&nbsp;</a></span>getName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string souffle::MinimiseProgramTransformer::getName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classsouffle_1_1_ast_transformer.html#a5f0905c069a0a2cf54e46e92499ba95c">souffle::AstTransformer</a>.</p>

<p class="definition">Definition at line <a class="el" href="_minimise_program_8h_source.html#l00033">33</a> of file <a class="el" href="_minimise_program_8h_source.html">MinimiseProgram.h</a>.</p>

<p class="reference">References <a class="el" href="_minimise_program_8cpp_source.html#l00376">areBijectivelyEquivalent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                       {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;MinimiseProgramTransformer&quot;</span>;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    }</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_a18b7e0b80e91ae532e00adcc3e1724d2_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_a18b7e0b80e91ae532e00adcc3e1724d2_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_a18b7e0b80e91ae532e00adcc3e1724d2_cgraph" id="classsouffle_1_1_minimise_program_transformer_a18b7e0b80e91ae532e00adcc3e1724d2_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c" title="souffle::MinimiseProgram\lTransformer::areBijectivelyEquivalent" alt="" coords="241,129,508,171"/>
<area shape="rect" id="node3" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a34e47cf9f685eceddef67519b1ee439b" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::NormalisedClauseRepr" alt="" coords="556,122,783,178"/>
<area shape="rect" id="node4" href="classsouffle_1_1_ast_clause.html#a5a29a4f9ba5d0e4aea869cf71a6efbbf" title="Return the atom that represents the head of the clause. " alt="" coords="875,5,1013,47"/>
<area shape="rect" id="node5" href="classsouffle_1_1_ast_atom.html#a9c726c597d7921245dd97dcc72b8aeed" title="get arguments " alt="" coords="1393,135,1623,162"/>
<area shape="rect" id="node7" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a72432d810132129b61c9d4097fed9cfd" title="Return a normalised string repr of an argument. " alt="" coords="1395,303,1621,359"/>
<area shape="rect" id="node8" href="classsouffle_1_1_ast_clause.html#a1b5199df425ba5839383a75c5bb8a254" title="Obtains a copy of the internally maintained body literals. " alt="" coords="875,71,1013,112"/>
<area shape="rect" id="node9" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a033bbba8725b56e7e2a1ff2ec952f6bb" title="Parse a body literal into the element list. " alt="" coords="831,270,1057,326"/>
<area shape="rect" id="node6" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="1684,107,1831,134"/>
<area shape="rect" id="node10" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#aeac7b9e6005406f777e83c127294226e" title="Parse an atom with a preset name qualifier into the element list. " alt="" coords="1105,238,1332,294"/>
<area shape="rect" id="node12" href="classsouffle_1_1_ast_qualified_name.html#ad0b3356de316d11e1782e83425b0e69a" title="prepend qualifiers " alt="" coords="1412,187,1604,228"/>
<area shape="rect" id="node13" href="namespacesouffle.html#a10525539360588d9c9048cb27f80d6ea" title="Converts operator to its symbolic representation. " alt="" coords="1121,369,1317,411"/>
<area shape="rect" id="node14" href="namespacesouffle.html#aecc08c83ad9634fc515b7aa094702949" title="A generic function converting strings into strings (trivial case). " alt="" coords="1156,435,1281,462"/>
<area shape="rect" id="node11" href="classsouffle_1_1_ast_atom.html#a2fcd569fa7d8ed8c0c2dfd0d1c362e50" title="get qualified name " alt="" coords="1380,253,1636,279"/>
</map>
</div>

</div>
</div>
<a id="a84a1b20f4ab1e2e63618323f87f737d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84a1b20f4ab1e2e63618323f87f737d3">&#9670;&nbsp;</a></span>isValidPermutation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::MinimiseProgramTransformer::isValidPermutation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html">NormalisedClauseRepr</a> &amp;&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html">NormalisedClauseRepr</a> &amp;&#160;</td>
          <td class="paramname"><em>right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; unsigned int &gt; &amp;&#160;</td>
          <td class="paramname"><em>permutation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_minimise_program_8cpp_source.html#l00271">271</a> of file <a class="el" href="_minimise_program_8cpp_source.html">MinimiseProgram.cpp</a>.</p>

<p class="reference">References <a class="el" href="_minimise_program_8cpp_source.html#l00086">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::getConstants()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00090">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::getElements()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00082">souffle::MinimiseProgramTransformer::NormalisedClauseRepr::getVariables()</a>, <a class="el" href="json11_8h_source.html#l00662">i</a>, and <a class="el" href="html_js_chartist_min_8h_source.html#l00015">j</a>.</p>

<p class="reference">Referenced by <a class="el" href="_minimise_program_8cpp_source.html#l00314">areBijectivelyEquivalent()</a>, and <a class="el" href="_minimise_program_8h_source.html#l00040">clone()</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                                                                       {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; leftElements = left.getElements();</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rightElements = right.getElements();</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    assert(leftElements.size() == rightElements.size() &amp;&amp; <span class="stringliteral">&quot;clauses should have equal size&quot;</span>);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordtype">size_t</span> size = leftElements.size();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    std::map&lt;std::string, std::string&gt; variableMap;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Constants should be fixed to the identically-named constant</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cst : left.getConstants()) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        variableMap[cst] = cst;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// Variables start off mapping to nothing</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; var : left.getVariables()) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        variableMap[var] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// Pass through the all arguments in the first clause in sequence, mapping each to the corresponding</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// argument in the second clause under the literal permutation</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 0; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> &lt; size; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>++) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; leftArgs = leftElements[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>].params;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rightArgs = rightElements[permutation[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>]].params;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a> = 0; <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a> &lt; leftArgs.size(); <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>++) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keyword">auto</span> leftArg = leftArgs[<a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>];</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keyword">auto</span> rightArg = rightArgs[<a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>];</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            std::string currentMap = variableMap[leftArg];</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">if</span> (currentMap.empty()) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <span class="comment">// unassigned yet, so assign it appropriately</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                variableMap[leftArg] = rightArg;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentMap != rightArg) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <span class="comment">// inconsistent mapping!</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="comment">// clauses cannot be equivalent under this permutation</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="ttc" id="json11_8h_html_ae46bd26d7133dfe98f8cec7c5ac5c7a1"><div class="ttname"><a href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json11_8h_source.html#l00662">json11.h:662</a></div></div>
<div class="ttc" id="html_js_chartist_min_8h_html_aab858032a95af802114b255fac6f45f2"><div class="ttname"><a href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a></div><div class="ttdeci">var j</div><div class="ttdef"><b>Definition:</b> <a href="html_js_chartist_min_8h_source.html#l00015">htmlJsChartistMin.h:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_a84a1b20f4ab1e2e63618323f87f737d3_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_a84a1b20f4ab1e2e63618323f87f737d3_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_a84a1b20f4ab1e2e63618323f87f737d3_cgraph" id="classsouffle_1_1_minimise_program_transformer_a84a1b20f4ab1e2e63618323f87f737d3_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a1a44f1ca5e269da8448896136de64acd" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::getConstants" alt="" coords="284,5,511,61"/>
<area shape="rect" id="node3" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a1c51bf91ca46130cd4be3c6fc1bc975c" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::getElements" alt="" coords="284,85,511,141"/>
<area shape="rect" id="node4" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a6d9ad810c382155445a670344ce6e136" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::getVariables" alt="" coords="284,165,511,221"/>
</map>
</div>

</div>
</div>
<a id="ae81d730e2848958be48f2d880d7a3d94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae81d730e2848958be48f2d880d7a3d94">&#9670;&nbsp;</a></span>reduceClauseBodies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::MinimiseProgramTransformer::reduceClauseBodies </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove redundant literals within a clause. </p>

<p class="definition">Definition at line <a class="el" href="_minimise_program_8cpp_source.html#l00531">531</a> of file <a class="el" href="_minimise_program_8cpp_source.html">MinimiseProgram.cpp</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00166">souffle::clone()</a>, <a class="el" href="_magic_set_8cpp_source.html#l00057">souffle::contains()</a>, <a class="el" href="ast_2_translation_unit_8h_source.html#l00073">souffle::AstTranslationUnit::getProgram()</a>, <a class="el" href="json11_8h_source.html#l00662">i</a>, <a class="el" href="html_js_chartist_min_8h_source.html#l00015">j</a>, and <a class="el" href="ast_2_program_8h_source.html#l00112">souffle::AstProgram::removeClause()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_minimise_program_8h_source.html#l00040">clone()</a>, and <a class="el" href="_minimise_program_8cpp_source.html#l00571">transform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                                                                       {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keyword">auto</span>&amp; program = *translationUnit.getProgram();</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    std::set&lt;std::unique_ptr&lt;AstClause&gt;&gt; clausesToAdd;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    std::set&lt;std::unique_ptr&lt;AstClause&gt;&gt; clausesToRemove;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* clause : program.getClauses()) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keyword">auto</span> bodyLiterals = clause-&gt;getBodyLiterals();</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        std::set&lt;size_t&gt; redundantPositions;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 0; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> &lt; bodyLiterals.size(); <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>++) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a> = 0; <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a> &lt; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>; <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>++) {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                <span class="keywordflow">if</span> (*bodyLiterals[i] == *bodyLiterals[<a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>]) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                    redundantPositions.insert(j);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                }</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">if</span> (!redundantPositions.empty()) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keyword">auto</span> minimisedClause = std::make_unique&lt;AstClause&gt;();</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            minimisedClause-&gt;setHead(<a class="code" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584">souffle::clone</a>(clause-&gt;getHead()));</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; bodyLiterals.size(); i++) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="namespacesouffle.html#a8a825f62e860ca448e7e16ab1a3a4333">contains</a>(redundantPositions, i)) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                    minimisedClause-&gt;addToBody(<a class="code" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584">souffle::clone</a>(bodyLiterals[i]));</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            clausesToAdd.insert(std::move(minimisedClause));</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            clausesToRemove.insert(<a class="code" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584">souffle::clone</a>(clause));</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; clause : clausesToRemove) {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        program.removeClause(clause.get());</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; clause : clausesToAdd) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        program.addClause(<a class="code" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584">souffle::clone</a>(clause));</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">return</span> !clausesToAdd.empty();</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div><div class="ttc" id="namespacesouffle_html_a8a825f62e860ca448e7e16ab1a3a4333"><div class="ttname"><a href="namespacesouffle.html#a8a825f62e860ca448e7e16ab1a3a4333">souffle::contains</a></div><div class="ttdeci">bool contains(std::set&lt; AdornedPredicate &gt; adornedPredicates, const AstQualifiedName &amp;atomName, const std::string &amp;atomAdornment)</div><div class="ttdef"><b>Definition:</b> <a href="_magic_set_8cpp_source.html#l00057">MagicSet.cpp:57</a></div></div>
<div class="ttc" id="namespacesouffle_html_a1dd578fbaf92e67ee52ebdd8cf364584"><div class="ttname"><a href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584">souffle::clone</a></div><div class="ttdeci">auto clone(const std::vector&lt; A *&gt; &amp;xs)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00166">ContainerUtil.h:166</a></div></div>
<div class="ttc" id="json11_8h_html_ae46bd26d7133dfe98f8cec7c5ac5c7a1"><div class="ttname"><a href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json11_8h_source.html#l00662">json11.h:662</a></div></div>
<div class="ttc" id="html_js_chartist_min_8h_html_aab858032a95af802114b255fac6f45f2"><div class="ttname"><a href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a></div><div class="ttdeci">var j</div><div class="ttdef"><b>Definition:</b> <a href="html_js_chartist_min_8h_source.html#l00015">htmlJsChartistMin.h:15</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_ae81d730e2848958be48f2d880d7a3d94_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_ae81d730e2848958be48f2d880d7a3d94_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_ae81d730e2848958be48f2d880d7a3d94_cgraph" id="classsouffle_1_1_minimise_program_transformer_ae81d730e2848958be48f2d880d7a3d94_cgraph">
<area shape="rect" id="node2" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584" title="souffle::clone" alt="" coords="335,5,445,32"/>
<area shape="rect" id="node3" href="namespacesouffle.html#a8a825f62e860ca448e7e16ab1a3a4333" title="souffle::contains" alt="" coords="325,56,455,83"/>
<area shape="rect" id="node5" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="293,107,487,149"/>
<area shape="rect" id="node6" href="classsouffle_1_1_ast_program.html#a0bde67af569811987d8e21929163d132" title="remove a clause " alt="" coords="315,173,465,214"/>
<area shape="rect" id="node4" href="namespacesouffle.html#aae135d2382a133fa5b036296fbd7f60a" title="souffle::isEqualAdornment" alt="" coords="535,56,728,83"/>
</map>
</div>

</div>
</div>
<a id="abab3602ce84db09dbbdb127edf14051d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abab3602ce84db09dbbdb127edf14051d">&#9670;&nbsp;</a></span>reduceLocallyEquivalentClauses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::MinimiseProgramTransformer::reduceLocallyEquivalentClauses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>&ndash; Sub-Transformations &ndash; </p>
<p>Reduces locally-redundant clauses. A clause is locally-redundant if there is another clause within the same relation that computes the same set of tuples. </p>

<p class="definition">Definition at line <a class="el" href="_minimise_program_8cpp_source.html#l00383">383</a> of file <a class="el" href="_minimise_program_8cpp_source.html">MinimiseProgram.cpp</a>.</p>

<p class="reference">References <a class="el" href="_minimise_program_8cpp_source.html#l00376">areBijectivelyEquivalent()</a>, <a class="el" href="_utils_8cpp_source.html#l00067">souffle::getClauses()</a>, <a class="el" href="ast_2_translation_unit_8h_source.html#l00073">souffle::AstTranslationUnit::getProgram()</a>, <a class="el" href="ast_2_program_8h_source.html#l00056">souffle::AstProgram::getRelations()</a>, and <a class="el" href="ast_2_program_8h_source.html#l00112">souffle::AstProgram::removeClause()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_minimise_program_8h_source.html#l00040">clone()</a>, and <a class="el" href="_minimise_program_8cpp_source.html#l00571">transform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                                                                                   {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    AstProgram&amp; program = *translationUnit.getProgram();</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    std::vector&lt;AstClause*&gt; clausesToDelete;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// split up each relation&#39;s rules into equivalence classes</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// TODO (azreika): consider turning this into an ast analysis instead</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">for</span> (AstRelation* rel : program.getRelations()) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        std::vector&lt;std::vector&lt;AstClause*&gt;&gt; equivalenceClasses;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">for</span> (AstClause* clause : <a class="code" href="namespacesouffle.html#a4d9e53888640a9abfd7ea7c43715152a">getClauses</a>(program, *rel)) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordtype">bool</span> added = <span class="keyword">false</span>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">for</span> (std::vector&lt;AstClause*&gt;&amp; eqClass : equivalenceClasses) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                AstClause* rep = eqClass[0];</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c">areBijectivelyEquivalent</a>(rep, clause)) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    <span class="comment">// clause belongs to an existing equivalence class, so delete it</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                    eqClass.push_back(clause);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                    clausesToDelete.push_back(clause);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                    added = <span class="keyword">true</span>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordflow">if</span> (!added) {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <span class="comment">// clause does not belong to any existing equivalence class, so keep it</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                std::vector&lt;AstClause*&gt; clauseToAdd = {clause};</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                equivalenceClasses.push_back(clauseToAdd);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// remove non-representative clauses</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> clause : clausesToDelete) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        program.removeClause(clause);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">// changed iff any clauses were deleted</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> !clausesToDelete.empty();</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div><div class="ttc" id="classsouffle_1_1_minimise_program_transformer_html_add5bf88b9933b3c30318252494570b2c"><div class="ttname"><a href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c">souffle::MinimiseProgramTransformer::areBijectivelyEquivalent</a></div><div class="ttdeci">static bool areBijectivelyEquivalent(const AstClause *left, const AstClause *right)</div><div class="ttdef"><b>Definition:</b> <a href="_minimise_program_8cpp_source.html#l00376">MinimiseProgram.cpp:376</a></div></div>
<div class="ttc" id="namespacesouffle_html_a4d9e53888640a9abfd7ea7c43715152a"><div class="ttname"><a href="namespacesouffle.html#a4d9e53888640a9abfd7ea7c43715152a">souffle::getClauses</a></div><div class="ttdeci">std::vector&lt; AstClause * &gt; getClauses(const AstProgram &amp;program, const AstQualifiedName &amp;relationName)</div><div class="ttdoc">Returns a vector of clauses in the program describing the relation with the given name...</div><div class="ttdef"><b>Definition:</b> <a href="_utils_8cpp_source.html#l00067">Utils.cpp:67</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_abab3602ce84db09dbbdb127edf14051d_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_abab3602ce84db09dbbdb127edf14051d_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_abab3602ce84db09dbbdb127edf14051d_cgraph" id="classsouffle_1_1_minimise_program_transformer_abab3602ce84db09dbbdb127edf14051d_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c" title="souffle::MinimiseProgram\lTransformer::areBijectivelyEquivalent" alt="" coords="320,373,587,415"/>
<area shape="rect" id="node15" href="namespacesouffle.html#a4d9e53888640a9abfd7ea7c43715152a" title="Returns a vector of clauses in the program describing the relation with the given name..." alt="" coords="380,554,527,581"/>
<area shape="rect" id="node17" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="357,605,550,647"/>
<area shape="rect" id="node18" href="classsouffle_1_1_ast_program.html#a71fb3c28c3a105637c22cbe6a9fb63ef" title="get relations " alt="" coords="673,496,823,537"/>
<area shape="rect" id="node19" href="classsouffle_1_1_ast_program.html#a0bde67af569811987d8e21929163d132" title="remove a clause " alt="" coords="378,671,529,712"/>
<area shape="rect" id="node3" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a34e47cf9f685eceddef67519b1ee439b" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::NormalisedClauseRepr" alt="" coords="635,191,861,247"/>
<area shape="rect" id="node4" href="classsouffle_1_1_ast_clause.html#a5a29a4f9ba5d0e4aea869cf71a6efbbf" title="Return the atom that represents the head of the clause. " alt="" coords="953,71,1092,112"/>
<area shape="rect" id="node5" href="classsouffle_1_1_ast_atom.html#a9c726c597d7921245dd97dcc72b8aeed" title="get arguments " alt="" coords="1471,158,1702,185"/>
<area shape="rect" id="node7" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a72432d810132129b61c9d4097fed9cfd" title="Return a normalised string repr of an argument. " alt="" coords="1473,402,1700,458"/>
<area shape="rect" id="node8" href="classsouffle_1_1_ast_clause.html#a1b5199df425ba5839383a75c5bb8a254" title="Obtains a copy of the internally maintained body literals. " alt="" coords="953,5,1092,47"/>
<area shape="rect" id="node9" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a033bbba8725b56e7e2a1ff2ec952f6bb" title="Parse a body literal into the element list. " alt="" coords="909,271,1136,327"/>
<area shape="rect" id="node6" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="1763,351,1909,378"/>
<area shape="rect" id="node10" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#aeac7b9e6005406f777e83c127294226e" title="Parse an atom with a preset name qualifier into the element list. " alt="" coords="1184,169,1411,225"/>
<area shape="rect" id="node12" href="classsouffle_1_1_ast_qualified_name.html#ad0b3356de316d11e1782e83425b0e69a" title="prepend qualifiers " alt="" coords="1491,297,1683,339"/>
<area shape="rect" id="node13" href="namespacesouffle.html#a10525539360588d9c9048cb27f80d6ea" title="Converts operator to its symbolic representation. " alt="" coords="1199,249,1395,291"/>
<area shape="rect" id="node14" href="namespacesouffle.html#aecc08c83ad9634fc515b7aa094702949" title="A generic function converting strings into strings (trivial case). " alt="" coords="1235,366,1360,393"/>
<area shape="rect" id="node11" href="classsouffle_1_1_ast_atom.html#a2fcd569fa7d8ed8c0c2dfd0d1c362e50" title="get qualified name " alt="" coords="1459,209,1715,235"/>
<area shape="rect" id="node16" href="classsouffle_1_1_ast_program.html#aa04b430e385f40c6fe2bf7ad2ca31bb3" title="get clauses " alt="" coords="673,561,823,603"/>
</map>
</div>

</div>
</div>
<a id="af0c88072e2805fbb40aa0cc87c38142d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0c88072e2805fbb40aa0cc87c38142d">&#9670;&nbsp;</a></span>reduceSingletonRelations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::MinimiseProgramTransformer::reduceSingletonRelations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes redundant singleton relations. </p>
<p>Singleton relations are relations with a single clause. A singleton relation is redundant if there exists another singleton relation that computes the same set of tuples. </p><dl class="section return"><dt>Returns</dt><dd>true iff the program was changed </dd></dl>

<p class="definition">Definition at line <a class="el" href="_minimise_program_8cpp_source.html#l00425">425</a> of file <a class="el" href="_minimise_program_8cpp_source.html">MinimiseProgram.cpp</a>.</p>

<p class="reference">References <a class="el" href="ast_2_program_8h_source.html#l00156">souffle::AstProgram::apply()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00376">areBijectivelyEquivalent()</a>, <a class="el" href="_container_util_8h_source.html#l00166">souffle::clone()</a>, <a class="el" href="ast_2_translation_unit_8h_source.html#l00049">souffle::AstTranslationUnit::getAnalysis()</a>, <a class="el" href="_utils_8cpp_source.html#l00067">souffle::getClauses()</a>, <a class="el" href="_clause_8h_source.html#l00069">souffle::AstClause::getHead()</a>, <a class="el" href="ast_2_translation_unit_8h_source.html#l00073">souffle::AstTranslationUnit::getProgram()</a>, <a class="el" href="_atom_8h_source.html#l00048">souffle::AstAtom::getQualifiedName()</a>, <a class="el" href="_utils_8cpp_source.html#l00091">souffle::getRelation()</a>, <a class="el" href="ast_2_program_8h_source.html#l00056">souffle::AstProgram::getRelations()</a>, <a class="el" href="json11_8h_source.html#l00662">i</a>, <a class="el" href="html_js_chartist_min_8h_source.html#l00015">j</a>, <a class="el" href="ast_2_program_8h_source.html#l00112">souffle::AstProgram::removeClause()</a>, and <a class="el" href="ast_2_program_8h_source.html#l00087">souffle::AstProgram::removeRelation()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_minimise_program_8h_source.html#l00040">clone()</a>, and <a class="el" href="_minimise_program_8cpp_source.html#l00571">transform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                                                                             {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// Note: This reduction is particularly useful in conjunction with the</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// body-partitioning transformation</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    AstProgram&amp; program = *translationUnit.getProgram();</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keyword">auto</span>* ioTypes = translationUnit.getAnalysis&lt;IOType&gt;();</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">// Find all singleton relations to consider</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    std::vector&lt;AstClause*&gt; singletonRelationClauses;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">for</span> (AstRelation* rel : program.getRelations()) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span> (!ioTypes-&gt;isIO(rel) &amp;&amp; <a class="code" href="namespacesouffle.html#a4d9e53888640a9abfd7ea7c43715152a">getClauses</a>(program, *rel).size() == 1) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            AstClause* clause = <a class="code" href="namespacesouffle.html#a4d9e53888640a9abfd7ea7c43715152a">getClauses</a>(program, *rel)[0];</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            singletonRelationClauses.push_back(clause);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment">// Keep track of clauses found to be redundant</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    std::set&lt;AstClause*&gt; redundantClauses;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// Keep track of canonical relation name for each redundant clause</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    std::map&lt;AstQualifiedName, AstQualifiedName&gt; canonicalName;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="comment">// Check pairwise equivalence of each singleton relation</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> = 0; <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> &lt; singletonRelationClauses.size(); <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>++) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        AstClause* first = singletonRelationClauses[<a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a>];</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> (redundantClauses.find(first) != redundantClauses.end()) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="comment">// Already found to be redundant, no need to check</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a> = <a class="code" href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a> + 1; <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a> &lt; singletonRelationClauses.size(); <a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>++) {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            AstClause* second = singletonRelationClauses[<a class="code" href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a>];</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="comment">// Note: Bijective-equivalence check does not care about the head relation name</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c">areBijectivelyEquivalent</a>(first, second)) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                AstQualifiedName firstName = first-&gt;getHead()-&gt;getQualifiedName();</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                AstQualifiedName secondName = second-&gt;getHead()-&gt;getQualifiedName();</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                redundantClauses.insert(second);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                canonicalName.insert(std::pair(secondName, firstName));</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">// Remove redundant relation definitions</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">for</span> (AstClause* clause : redundantClauses) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keyword">auto</span> relName = clause-&gt;getHead()-&gt;getQualifiedName();</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        AstRelation* rel = <a class="code" href="namespacesouffle.html#ada252aa15afbf7d703a11b000dfd4048">getRelation</a>(program, relName);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        assert(rel != <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;relation does not exist in program&quot;</span>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        program.removeClause(clause);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        program.removeRelation(relName);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment">// Replace each redundant relation appearance with its canonical name</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keyword">struct </span>replaceRedundantRelations : <span class="keyword">public</span> AstNodeMapper {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keyword">const</span> std::map&lt;AstQualifiedName, AstQualifiedName&gt;&amp; canonicalName;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        replaceRedundantRelations(<span class="keyword">const</span> std::map&lt;AstQualifiedName, AstQualifiedName&gt;&amp; canonicalName)</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                : canonicalName(canonicalName) {}</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        std::unique_ptr&lt;AstNode&gt; operator()(std::unique_ptr&lt;AstNode&gt; node)<span class="keyword"> const override </span>{</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <span class="comment">// Remove appearances from children nodes</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            node-&gt;apply(*<span class="keyword">this</span>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">auto</span>* atom = dynamic_cast&lt;AstAtom*&gt;(node.get())) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                <span class="keyword">auto</span> pos = canonicalName.find(atom-&gt;getQualifiedName());</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <span class="keywordflow">if</span> (pos != canonicalName.end()) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                    <span class="keyword">auto</span> newAtom = <a class="code" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584">souffle::clone</a>(atom);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    newAtom-&gt;setQualifiedName(pos-&gt;second);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    <span class="keywordflow">return</span> newAtom;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            }</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">return</span> node;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    };</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    replaceRedundantRelations update(canonicalName);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    program.apply(update);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Program was changed iff a relation was replaced</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">return</span> !canonicalName.empty();</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div><div class="ttc" id="namespacesouffle_html_a1dd578fbaf92e67ee52ebdd8cf364584"><div class="ttname"><a href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584">souffle::clone</a></div><div class="ttdeci">auto clone(const std::vector&lt; A *&gt; &amp;xs)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00166">ContainerUtil.h:166</a></div></div>
<div class="ttc" id="json11_8h_html_ae46bd26d7133dfe98f8cec7c5ac5c7a1"><div class="ttname"><a href="json11_8h.html#ae46bd26d7133dfe98f8cec7c5ac5c7a1">i</a></div><div class="ttdeci">size_t i</div><div class="ttdef"><b>Definition:</b> <a href="json11_8h_source.html#l00662">json11.h:662</a></div></div>
<div class="ttc" id="namespacesouffle_html_ada252aa15afbf7d703a11b000dfd4048"><div class="ttname"><a href="namespacesouffle.html#ada252aa15afbf7d703a11b000dfd4048">souffle::getRelation</a></div><div class="ttdeci">AstRelation * getRelation(const AstProgram &amp;program, const AstQualifiedName &amp;name)</div><div class="ttdoc">Returns the relation with the given name in the program. </div><div class="ttdef"><b>Definition:</b> <a href="_utils_8cpp_source.html#l00091">Utils.cpp:91</a></div></div>
<div class="ttc" id="html_js_chartist_min_8h_html_aab858032a95af802114b255fac6f45f2"><div class="ttname"><a href="html_js_chartist_min_8h.html#aab858032a95af802114b255fac6f45f2">j</a></div><div class="ttdeci">var j</div><div class="ttdef"><b>Definition:</b> <a href="html_js_chartist_min_8h_source.html#l00015">htmlJsChartistMin.h:15</a></div></div>
<div class="ttc" id="classsouffle_1_1_minimise_program_transformer_html_add5bf88b9933b3c30318252494570b2c"><div class="ttname"><a href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c">souffle::MinimiseProgramTransformer::areBijectivelyEquivalent</a></div><div class="ttdeci">static bool areBijectivelyEquivalent(const AstClause *left, const AstClause *right)</div><div class="ttdef"><b>Definition:</b> <a href="_minimise_program_8cpp_source.html#l00376">MinimiseProgram.cpp:376</a></div></div>
<div class="ttc" id="namespacesouffle_html_a4d9e53888640a9abfd7ea7c43715152a"><div class="ttname"><a href="namespacesouffle.html#a4d9e53888640a9abfd7ea7c43715152a">souffle::getClauses</a></div><div class="ttdeci">std::vector&lt; AstClause * &gt; getClauses(const AstProgram &amp;program, const AstQualifiedName &amp;relationName)</div><div class="ttdoc">Returns a vector of clauses in the program describing the relation with the given name...</div><div class="ttdef"><b>Definition:</b> <a href="_utils_8cpp_source.html#l00067">Utils.cpp:67</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_af0c88072e2805fbb40aa0cc87c38142d_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_af0c88072e2805fbb40aa0cc87c38142d_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_af0c88072e2805fbb40aa0cc87c38142d_cgraph" id="classsouffle_1_1_minimise_program_transformer_af0c88072e2805fbb40aa0cc87c38142d_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_program.html#a0a658e411394dfc93da0ab36e06d0101" title="Apply the mapper to all child nodes. " alt="" coords="325,32,475,73"/>
<area shape="rect" id="node4" href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c" title="souffle::MinimiseProgram\lTransformer::areBijectivelyEquivalent" alt="" coords="267,375,533,416"/>
<area shape="rect" id="node6" href="classsouffle_1_1_ast_clause.html#a5a29a4f9ba5d0e4aea869cf71a6efbbf" title="Return the atom that represents the head of the clause. " alt="" coords="901,100,1040,141"/>
<area shape="rect" id="node13" href="classsouffle_1_1_ast_atom.html#a2fcd569fa7d8ed8c0c2dfd0d1c362e50" title="get qualified name " alt="" coords="1407,491,1663,518"/>
<area shape="rect" id="node17" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584" title="souffle::clone" alt="" coords="345,273,455,299"/>
<area shape="rect" id="node18" href="classsouffle_1_1_ast_translation_unit.html#af396e44c83e5ad410c9ec3e2f6b91758" title="get analysis: analysis is generated on the fly if not present " alt="" coords="303,207,497,248"/>
<area shape="rect" id="node21" href="namespacesouffle.html#a4d9e53888640a9abfd7ea7c43715152a" title="Returns a vector of clauses in the program describing the relation with the given name..." alt="" coords="897,674,1044,701"/>
<area shape="rect" id="node23" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="303,440,497,481"/>
<area shape="rect" id="node24" href="namespacesouffle.html#ada252aa15afbf7d703a11b000dfd4048" title="Returns the relation with the given name in the program. " alt="" coords="326,155,474,182"/>
<area shape="rect" id="node26" href="classsouffle_1_1_ast_program.html#a71fb3c28c3a105637c22cbe6a9fb63ef" title="get relations " alt="" coords="620,89,771,131"/>
<area shape="rect" id="node27" href="classsouffle_1_1_ast_program.html#a0bde67af569811987d8e21929163d132" title="remove a clause " alt="" coords="895,725,1046,767"/>
<area shape="rect" id="node28" href="classsouffle_1_1_ast_program.html#a8bd39fbf78f6e4b5347bab4c90486bfd" title="remove relation " alt="" coords="325,561,475,603"/>
<area shape="rect" id="node3" href="namespacesouffle.html#a850ddc94302e9b170a98729a22a4c8fa" title="Applies a function to each element of a vector and returns the results. " alt="" coords="644,38,747,65"/>
<area shape="rect" id="node5" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a34e47cf9f685eceddef67519b1ee439b" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::NormalisedClauseRepr" alt="" coords="582,374,809,430"/>
<area shape="rect" id="node7" href="classsouffle_1_1_ast_atom.html#a9c726c597d7921245dd97dcc72b8aeed" title="get arguments " alt="" coords="1419,441,1650,467"/>
<area shape="rect" id="node9" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a72432d810132129b61c9d4097fed9cfd" title="Return a normalised string repr of an argument. " alt="" coords="1421,135,1648,191"/>
<area shape="rect" id="node10" href="classsouffle_1_1_ast_clause.html#a1b5199df425ba5839383a75c5bb8a254" title="Obtains a copy of the internally maintained body literals. " alt="" coords="1465,543,1604,584"/>
<area shape="rect" id="node11" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a033bbba8725b56e7e2a1ff2ec952f6bb" title="Parse a body literal into the element list. " alt="" coords="857,289,1084,345"/>
<area shape="rect" id="node8" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="1711,550,1857,577"/>
<area shape="rect" id="node12" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#aeac7b9e6005406f777e83c127294226e" title="Parse an atom with a preset name qualifier into the element list. " alt="" coords="1132,251,1359,307"/>
<area shape="rect" id="node14" href="classsouffle_1_1_ast_qualified_name.html#ad0b3356de316d11e1782e83425b0e69a" title="prepend qualifiers " alt="" coords="1439,237,1631,279"/>
<area shape="rect" id="node15" href="namespacesouffle.html#a10525539360588d9c9048cb27f80d6ea" title="Converts operator to its symbolic representation. " alt="" coords="1147,332,1343,373"/>
<area shape="rect" id="node16" href="namespacesouffle.html#aecc08c83ad9634fc515b7aa094702949" title="A generic function converting strings into strings (trivial case). " alt="" coords="1183,398,1308,425"/>
<area shape="rect" id="node19" href="classsouffle_1_1_debug_report.html#ac0feb8780d23c2ca5d7700e4857b10c4" title="souffle::DebugReport\l::addSection" alt="" coords="616,207,775,248"/>
<area shape="rect" id="node20" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640" title="souffle::Global::config" alt="" coords="614,273,777,299"/>
<area shape="rect" id="node22" href="classsouffle_1_1_ast_program.html#aa04b430e385f40c6fe2bf7ad2ca31bb3" title="get clauses " alt="" coords="1170,667,1321,708"/>
<area shape="rect" id="node25" href="namespacesouffle.html#a62f80c157a6a365d78a43592732a8efa" title="Returns the first element in a container that satisfies a given predicate, nullptr otherwise..." alt="" coords="643,155,747,182"/>
<area shape="rect" id="node29" href="namespacesouffle.html#a503032b9def6267059072aea913780bc" title="Removes the set of clauses with the given relation name. " alt="" coords="581,623,809,650"/>
<area shape="rect" id="node30" href="namespacesouffle.html#a3ba7ed6638254bcc59869e1d88795b70" title="Removes the set of IOs with the given relation name. " alt="" coords="596,569,795,595"/>
<area shape="rect" id="node31" href="namespacesouffle.html#ab071e2356802d2c83ede10833a2aa413" title="souffle::getIOs" alt="" coords="913,557,1029,583"/>
<area shape="rect" id="node33" href="classsouffle_1_1_ast_program.html#a79383827fb9e35c1bdc07f3503ba3f97" title="remove an io " alt="" coords="895,608,1046,649"/>
<area shape="rect" id="node32" href="classsouffle_1_1_ast_program.html#a30121078c8c847e227f351e1e495f677" title="get io directives " alt="" coords="1170,601,1321,643"/>
</map>
</div>

</div>
</div>
<a id="a4044666b16791d5f7ce48e375a2c3738"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4044666b16791d5f7ce48e375a2c3738">&#9670;&nbsp;</a></span>removeRedundantClauses()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::MinimiseProgramTransformer::removeRedundantClauses </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove clauses that are only satisfied if they are already satisfied. </p>

<p class="definition">Definition at line <a class="el" href="_minimise_program_8cpp_source.html#l00506">506</a> of file <a class="el" href="_minimise_program_8cpp_source.html">MinimiseProgram.cpp</a>.</p>

<p class="reference">References <a class="el" href="_container_util_8h_source.html#l00166">souffle::clone()</a>, <a class="el" href="ast_2_translation_unit_8h_source.html#l00073">souffle::AstTranslationUnit::getProgram()</a>, and <a class="el" href="ast_2_program_8h_source.html#l00112">souffle::AstProgram::removeClause()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_minimise_program_8h_source.html#l00040">clone()</a>, and <a class="el" href="_minimise_program_8cpp_source.html#l00571">transform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                                                                           {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keyword">auto</span>&amp; program = *translationUnit.getProgram();</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keyword">auto</span> isRedundant = [&amp;](<span class="keyword">const</span> AstClause* clause) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>* head = clause-&gt;getHead();</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* lit : clause-&gt;getBodyLiterals()) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">if</span> (*head == *lit) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    };</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    std::set&lt;std::unique_ptr&lt;AstClause&gt;&gt; clausesToRemove;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* clause : program.getClauses()) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keywordflow">if</span> (isRedundant(clause)) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            clausesToRemove.insert(<a class="code" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584">souffle::clone</a>(clause));</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; clause : clausesToRemove) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        program.removeClause(clause.get());</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">return</span> !clausesToRemove.empty();</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div><div class="ttc" id="namespacesouffle_html_a1dd578fbaf92e67ee52ebdd8cf364584"><div class="ttname"><a href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584">souffle::clone</a></div><div class="ttdeci">auto clone(const std::vector&lt; A *&gt; &amp;xs)</div><div class="ttdef"><b>Definition:</b> <a href="_container_util_8h_source.html#l00166">ContainerUtil.h:166</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_a4044666b16791d5f7ce48e375a2c3738_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_a4044666b16791d5f7ce48e375a2c3738_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_a4044666b16791d5f7ce48e375a2c3738_cgraph" id="classsouffle_1_1_minimise_program_transformer_a4044666b16791d5f7ce48e375a2c3738_cgraph">
<area shape="rect" id="node2" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584" title="souffle::clone" alt="" coords="322,5,431,32"/>
<area shape="rect" id="node3" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="280,57,473,98"/>
<area shape="rect" id="node4" href="classsouffle_1_1_ast_program.html#a0bde67af569811987d8e21929163d132" title="remove a clause " alt="" coords="301,122,452,163"/>
</map>
</div>

</div>
</div>
<a id="ab6a81fc39db5fb47bfd44a45ddc11c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6a81fc39db5fb47bfd44a45ddc11c4c">&#9670;&nbsp;</a></span>transform()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::MinimiseProgramTransformer::transform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classsouffle_1_1_ast_transformer.html#a6f2bde49dc0c328e8ef86918322282dc">souffle::AstTransformer</a>.</p>

<p class="definition">Definition at line <a class="el" href="_minimise_program_8cpp_source.html#l00571">571</a> of file <a class="el" href="_minimise_program_8cpp_source.html">MinimiseProgram.cpp</a>.</p>

<p class="reference">References <a class="el" href="_minimise_program_8cpp_source.html#l00531">reduceClauseBodies()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00383">reduceLocallyEquivalentClauses()</a>, <a class="el" href="_minimise_program_8cpp_source.html#l00425">reduceSingletonRelations()</a>, and <a class="el" href="_minimise_program_8cpp_source.html#l00506">removeRedundantClauses()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_minimise_program_8h_source.html#l00040">clone()</a>.</p>
<div class="fragment"><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                                                              {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordtype">bool</span> changed = <span class="keyword">false</span>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    changed |= <a class="code" href="classsouffle_1_1_minimise_program_transformer.html#ae81d730e2848958be48f2d880d7a3d94">reduceClauseBodies</a>(translationUnit);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    changed |= <a class="code" href="classsouffle_1_1_minimise_program_transformer.html#a4044666b16791d5f7ce48e375a2c3738">removeRedundantClauses</a>(translationUnit);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    changed |= <a class="code" href="classsouffle_1_1_minimise_program_transformer.html#abab3602ce84db09dbbdb127edf14051d">reduceLocallyEquivalentClauses</a>(translationUnit);</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    changed |= <a class="code" href="classsouffle_1_1_minimise_program_transformer.html#af0c88072e2805fbb40aa0cc87c38142d">reduceSingletonRelations</a>(translationUnit);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">return</span> changed;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div><div class="ttc" id="classsouffle_1_1_minimise_program_transformer_html_a4044666b16791d5f7ce48e375a2c3738"><div class="ttname"><a href="classsouffle_1_1_minimise_program_transformer.html#a4044666b16791d5f7ce48e375a2c3738">souffle::MinimiseProgramTransformer::removeRedundantClauses</a></div><div class="ttdeci">static bool removeRedundantClauses(AstTranslationUnit &amp;translationUnit)</div><div class="ttdoc">Remove clauses that are only satisfied if they are already satisfied. </div><div class="ttdef"><b>Definition:</b> <a href="_minimise_program_8cpp_source.html#l00506">MinimiseProgram.cpp:506</a></div></div>
<div class="ttc" id="classsouffle_1_1_minimise_program_transformer_html_af0c88072e2805fbb40aa0cc87c38142d"><div class="ttname"><a href="classsouffle_1_1_minimise_program_transformer.html#af0c88072e2805fbb40aa0cc87c38142d">souffle::MinimiseProgramTransformer::reduceSingletonRelations</a></div><div class="ttdeci">static bool reduceSingletonRelations(AstTranslationUnit &amp;translationUnit)</div><div class="ttdoc">Removes redundant singleton relations. </div><div class="ttdef"><b>Definition:</b> <a href="_minimise_program_8cpp_source.html#l00425">MinimiseProgram.cpp:425</a></div></div>
<div class="ttc" id="classsouffle_1_1_minimise_program_transformer_html_abab3602ce84db09dbbdb127edf14051d"><div class="ttname"><a href="classsouffle_1_1_minimise_program_transformer.html#abab3602ce84db09dbbdb127edf14051d">souffle::MinimiseProgramTransformer::reduceLocallyEquivalentClauses</a></div><div class="ttdeci">static bool reduceLocallyEquivalentClauses(AstTranslationUnit &amp;translationUnit)</div><div class="ttdoc">– Sub-Transformations – </div><div class="ttdef"><b>Definition:</b> <a href="_minimise_program_8cpp_source.html#l00383">MinimiseProgram.cpp:383</a></div></div>
<div class="ttc" id="classsouffle_1_1_minimise_program_transformer_html_ae81d730e2848958be48f2d880d7a3d94"><div class="ttname"><a href="classsouffle_1_1_minimise_program_transformer.html#ae81d730e2848958be48f2d880d7a3d94">souffle::MinimiseProgramTransformer::reduceClauseBodies</a></div><div class="ttdeci">static bool reduceClauseBodies(AstTranslationUnit &amp;translationUnit)</div><div class="ttdoc">Remove redundant literals within a clause. </div><div class="ttdef"><b>Definition:</b> <a href="_minimise_program_8cpp_source.html#l00531">MinimiseProgram.cpp:531</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_minimise_program_transformer_ab6a81fc39db5fb47bfd44a45ddc11c4c_cgraph.png" border="0" usemap="#classsouffle_1_1_minimise_program_transformer_ab6a81fc39db5fb47bfd44a45ddc11c4c_cgraph" alt=""/></div>
<map name="classsouffle_1_1_minimise_program_transformer_ab6a81fc39db5fb47bfd44a45ddc11c4c_cgraph" id="classsouffle_1_1_minimise_program_transformer_ab6a81fc39db5fb47bfd44a45ddc11c4c_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_minimise_program_transformer.html#ae81d730e2848958be48f2d880d7a3d94" title="Remove redundant literals within a clause. " alt="" coords="255,135,495,177"/>
<area shape="rect" id="node8" href="classsouffle_1_1_minimise_program_transformer.html#abab3602ce84db09dbbdb127edf14051d" title="– Sub&#45;Transformations – " alt="" coords="241,804,508,860"/>
<area shape="rect" id="node25" href="classsouffle_1_1_minimise_program_transformer.html#af0c88072e2805fbb40aa0cc87c38142d" title="Removes redundant singleton relations. " alt="" coords="268,435,481,491"/>
<area shape="rect" id="node39" href="classsouffle_1_1_minimise_program_transformer.html#a4044666b16791d5f7ce48e375a2c3738" title="Remove clauses that are only satisfied if they are already satisfied. " alt="" coords="261,201,488,257"/>
<area shape="rect" id="node3" href="namespacesouffle.html#a1dd578fbaf92e67ee52ebdd8cf364584" title="souffle::clone" alt="" coords="635,157,744,184"/>
<area shape="rect" id="node4" href="namespacesouffle.html#a8a825f62e860ca448e7e16ab1a3a4333" title="souffle::contains" alt="" coords="625,5,754,32"/>
<area shape="rect" id="node6" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="593,209,786,250"/>
<area shape="rect" id="node7" href="classsouffle_1_1_ast_program.html#a0bde67af569811987d8e21929163d132" title="remove a clause " alt="" coords="1185,247,1335,289"/>
<area shape="rect" id="node5" href="namespacesouffle.html#aae135d2382a133fa5b036296fbd7f60a" title="souffle::isEqualAdornment" alt="" coords="888,5,1081,32"/>
<area shape="rect" id="node9" href="classsouffle_1_1_minimise_program_transformer.html#add5bf88b9933b3c30318252494570b2c" title="souffle::MinimiseProgram\lTransformer::areBijectivelyEquivalent" alt="" coords="556,946,823,987"/>
<area shape="rect" id="node22" href="namespacesouffle.html#a4d9e53888640a9abfd7ea7c43715152a" title="Returns a vector of clauses in the program describing the relation with the given name..." alt="" coords="1187,392,1333,419"/>
<area shape="rect" id="node24" href="classsouffle_1_1_ast_program.html#a71fb3c28c3a105637c22cbe6a9fb63ef" title="get relations " alt="" coords="909,778,1060,819"/>
<area shape="rect" id="node10" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a34e47cf9f685eceddef67519b1ee439b" title="souffle::MinimiseProgram\lTransformer::NormalisedClause\lRepr::NormalisedClauseRepr" alt="" coords="871,979,1098,1035"/>
<area shape="rect" id="node11" href="classsouffle_1_1_ast_clause.html#a5a29a4f9ba5d0e4aea869cf71a6efbbf" title="Return the atom that represents the head of the clause. " alt="" coords="1191,559,1329,601"/>
<area shape="rect" id="node12" href="classsouffle_1_1_ast_atom.html#a9c726c597d7921245dd97dcc72b8aeed" title="get arguments " alt="" coords="1709,940,1939,967"/>
<area shape="rect" id="node14" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a72432d810132129b61c9d4097fed9cfd" title="Return a normalised string repr of an argument. " alt="" coords="1711,860,1937,916"/>
<area shape="rect" id="node15" href="classsouffle_1_1_ast_clause.html#a1b5199df425ba5839383a75c5bb8a254" title="Obtains a copy of the internally maintained body literals. " alt="" coords="1465,1127,1604,1169"/>
<area shape="rect" id="node16" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#a033bbba8725b56e7e2a1ff2ec952f6bb" title="Parse a body literal into the element list. " alt="" coords="1147,861,1373,917"/>
<area shape="rect" id="node13" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="2000,625,2147,652"/>
<area shape="rect" id="node17" href="classsouffle_1_1_minimise_program_transformer_1_1_normalised_clause_repr.html#aeac7b9e6005406f777e83c127294226e" title="Parse an atom with a preset name qualifier into the element list. " alt="" coords="1421,828,1648,884"/>
<area shape="rect" id="node19" href="classsouffle_1_1_ast_qualified_name.html#ad0b3356de316d11e1782e83425b0e69a" title="prepend qualifiers " alt="" coords="1728,753,1920,794"/>
<area shape="rect" id="node20" href="namespacesouffle.html#a10525539360588d9c9048cb27f80d6ea" title="Converts operator to its symbolic representation. " alt="" coords="1437,959,1633,1001"/>
<area shape="rect" id="node21" href="namespacesouffle.html#aecc08c83ad9634fc515b7aa094702949" title="A generic function converting strings into strings (trivial case). " alt="" coords="1472,777,1597,804"/>
<area shape="rect" id="node18" href="classsouffle_1_1_ast_atom.html#a2fcd569fa7d8ed8c0c2dfd0d1c362e50" title="get qualified name " alt="" coords="1696,684,1952,711"/>
<area shape="rect" id="node23" href="classsouffle_1_1_ast_program.html#aa04b430e385f40c6fe2bf7ad2ca31bb3" title="get clauses " alt="" coords="1749,430,1899,471"/>
<area shape="rect" id="node26" href="classsouffle_1_1_ast_program.html#a0a658e411394dfc93da0ab36e06d0101" title="Apply the mapper to all child nodes. " alt="" coords="614,377,765,418"/>
<area shape="rect" id="node28" href="classsouffle_1_1_ast_translation_unit.html#af396e44c83e5ad410c9ec3e2f6b91758" title="get analysis: analysis is generated on the fly if not present " alt="" coords="593,559,786,601"/>
<area shape="rect" id="node31" href="namespacesouffle.html#ada252aa15afbf7d703a11b000dfd4048" title="Returns the relation with the given name in the program. " alt="" coords="615,692,763,719"/>
<area shape="rect" id="node33" href="classsouffle_1_1_ast_program.html#a8bd39fbf78f6e4b5347bab4c90486bfd" title="remove relation " alt="" coords="614,442,765,483"/>
<area shape="rect" id="node27" href="namespacesouffle.html#a850ddc94302e9b170a98729a22a4c8fa" title="Applies a function to each element of a vector and returns the results. " alt="" coords="933,356,1036,383"/>
<area shape="rect" id="node29" href="classsouffle_1_1_debug_report.html#ac0feb8780d23c2ca5d7700e4857b10c4" title="souffle::DebugReport\l::addSection" alt="" coords="905,610,1064,651"/>
<area shape="rect" id="node30" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640" title="souffle::Global::config" alt="" coords="903,559,1066,585"/>
<area shape="rect" id="node32" href="namespacesouffle.html#a62f80c157a6a365d78a43592732a8efa" title="Returns the first element in a container that satisfies a given predicate, nullptr otherwise..." alt="" coords="933,727,1037,753"/>
<area shape="rect" id="node34" href="namespacesouffle.html#a503032b9def6267059072aea913780bc" title="Removes the set of clauses with the given relation name. " alt="" coords="871,407,1099,433"/>
<area shape="rect" id="node35" href="namespacesouffle.html#a3ba7ed6638254bcc59869e1d88795b70" title="Removes the set of IOs with the given relation name. " alt="" coords="885,457,1084,484"/>
<area shape="rect" id="node36" href="namespacesouffle.html#ab071e2356802d2c83ede10833a2aa413" title="souffle::getIOs" alt="" coords="1202,443,1318,469"/>
<area shape="rect" id="node38" href="classsouffle_1_1_ast_program.html#a79383827fb9e35c1bdc07f3503ba3f97" title="remove an io " alt="" coords="1185,494,1335,535"/>
<area shape="rect" id="node37" href="classsouffle_1_1_ast_program.html#a30121078c8c847e227f351e1e495f677" title="get io directives " alt="" coords="1459,517,1610,558"/>
</map>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ast/transform/<a class="el" href="_minimise_program_8h_source.html">MinimiseProgram.h</a></li>
<li>ast/transform/<a class="el" href="_minimise_program_8cpp_source.html">MinimiseProgram.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
